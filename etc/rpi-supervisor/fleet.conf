# ============================================================
# Rpi Supervisor — Fleet Configuration
# Node-side fleet behavior and identity settings
# ============================================================

[fleet]

# ------------------------------------------------------------
# Identity
# ------------------------------------------------------------

# Fleet server hostname or IP (rsup-fleetd)
server_host = 192.168.1.10

# Fleet server port
server_port = 8088

# Local node API port (rsup-node-api)
node_api_port = 8090

# Remote command agent port (rsup-cmd-agent)
cmd_port = 8092


# ------------------------------------------------------------
# Discovery Beacon
# ------------------------------------------------------------

# Enable UDP discovery beacons
beacon_enabled = true

# Broadcast interval (seconds)
beacon_interval = 5

# Discovery UDP port (must match fleet collector)
discovery_port = 8091


# ------------------------------------------------------------
# Security
# ------------------------------------------------------------

# Require signed fleet commands
require_signed_commands = true

# Maximum allowed clock skew (seconds)
max_time_skew = 90

# Reject commands if health below this score
min_health_for_commands = 25


# ------------------------------------------------------------
# Telemetry
# ------------------------------------------------------------

# Enable telemetry reporting
telemetry_enabled = true

# Telemetry push interval (seconds)
telemetry_interval = 30

# Include extended metrics (CPU, mem, etc — future)
extended_metrics = false


# ------------------------------------------------------------
# Key Rotation
# ------------------------------------------------------------

# Enable automatic key rotation
key_rotation_enabled = true

# Rotation interval (hours)
key_rotation_hours = 168

# Allow remote-triggered rotation
allow_remote_key_rotation = true


# ------------------------------------------------------------
# Reliability Safeguards
# ------------------------------------------------------------

# Refuse reboot if uptime < this many seconds
min_uptime_for_reboot = 60

# Require SAFE power state before shutdown
require_safe_power = true

# Enable brownout-triggered fleet warning
brownout_alerts = true


# ------------------------------------------------------------
# Debug / Development
# ------------------------------------------------------------

# Verbose fleet logging
debug = false